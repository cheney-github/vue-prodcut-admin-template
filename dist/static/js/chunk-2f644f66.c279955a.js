(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f644f66"],{c4c8:function(t,e,n){"use strict";n.d(e,"r",function(){return r}),n.d(e,"t",function(){return o}),n.d(e,"C",function(){return i}),n.d(e,"x",function(){return u}),n.d(e,"i",function(){return l}),n.d(e,"y",function(){return d}),n.d(e,"e",function(){return s}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return m}),n.d(e,"h",function(){return p}),n.d(e,"q",function(){return f}),n.d(e,"a",function(){return b}),n.d(e,"E",function(){return h}),n.d(e,"l",function(){return g}),n.d(e,"F",function(){return O}),n.d(e,"s",function(){return v}),n.d(e,"m",function(){return y}),n.d(e,"b",function(){return P}),n.d(e,"D",function(){return _}),n.d(e,"v",function(){return j}),n.d(e,"n",function(){return x}),n.d(e,"f",function(){return D}),n.d(e,"G",function(){return w}),n.d(e,"w",function(){return k}),n.d(e,"u",function(){return T}),n.d(e,"o",function(){return F}),n.d(e,"g",function(){return C}),n.d(e,"H",function(){return $}),n.d(e,"A",function(){return I}),n.d(e,"k",function(){return S}),n.d(e,"I",function(){return B}),n.d(e,"B",function(){return Y}),n.d(e,"z",function(){return L}),n.d(e,"j",function(){return N}),n.d(e,"p",function(){return M});var a=n("b775");function r(t){return Object(a["a"])({url:"/admin/getCompany",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/admin/getFirstClass",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/admin/getSecondClass",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/admin/getProductByConditions",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/admin/addProduct",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/admin/getProductById",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/admin/addPhotoInfo",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/admin/addInsuranceNotes",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/admin/addHealthNotice",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/admin/addPowerInfo",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/admin/getCommonProblem",method:"get",params:t})}function b(t){return Object(a["a"])({url:"/admin/addCommonProblem",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/admin/addCommonProblem",method:"post",data:t})}function g(t){return Object(a["a"])({url:"/admin/deleteCommonProblem",method:"delete",params:t})}function O(t){return Object(a["a"])({url:"/admin/addCommonProblem?id="+t.id+"&status="+t.status,method:"post",data:t})}function v(t){return Object(a["a"])({url:"/admin/addCommonProblem",method:"get",params:t})}function y(t){return Object(a["a"])({url:"/admin/deleteCustomerInformation",method:"delete",params:t})}function P(t){return Object(a["a"])({url:"/admin/addCustomerInformation",method:"post",data:t})}function _(t){return Object(a["a"])({url:"/admin/getTermsByType",method:"get",params:t})}function j(t){return Object(a["a"])({url:"/admin/getPlanDictGroupList",method:"get",params:t})}function x(t){return Object(a["a"])({url:"/admin/deletePlanDictGroup",method:"delete",params:t})}function D(t){return Object(a["a"])({url:"/admin/addPlanDictGroup",method:"post",data:t})}function w(t){return Object(a["a"])({url:"/admin/updatePlanDictGroup",method:"put",data:t})}function k(t){return Object(a["a"])({url:"/admin/getPlanDictOptionList",method:"get",params:t})}function T(t){return Object(a["a"])({url:"/admin/getOptionSelect",method:"get",params:t})}function F(t){return Object(a["a"])({url:"/admin/deletePlanDictOption",method:"delete",params:t})}function C(t){return Object(a["a"])({url:"/admin/addPlanDictOption",method:"post",data:t})}function $(t){return Object(a["a"])({url:"/admin/updatePlanDictOption",method:"put",data:t})}function I(t){return Object(a["a"])({url:"/admin/getProductPlanByConditions",method:"get",params:t})}function S(t){return Object(a["a"])({url:"/admin/addProductPlan",method:"post",data:t})}function B(t){return Object(a["a"])({url:"/admin/updateProductPlanStatus",method:"put",params:t})}function Y(t){return Object(a["a"])({url:"/admin/getProductPlanById",method:"get",params:t})}function L(t){return Object(a["a"])({url:"/admin/getProductOptionById",method:"get",params:t})}function N(t){return Object(a["a"])({url:"/admin/addProductOption",method:"post",data:t})}function M(t){return Object(a["a"])({url:"/admin/deleteProductOptionById",method:"delete",params:t})}},d460:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"demo-input-suffix"},[n("h2",{staticStyle:{"margin-bottom":"30px"}},[t._v("产品名称："+t._s(this.tableData.productName))]),t._v(" "),n("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.planForm}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"计划名称",prop:"planName","label-width":"120px"}},[n("el-input",{attrs:{placeholder:"请输入计划名称"},model:{value:t.planForm.planName,callback:function(e){t.$set(t.planForm,"planName","string"===typeof e?e.trim():e)},expression:"planForm.planName"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"产品状态",prop:"isOnline","label-width":"120px"}},[n("el-select",{model:{value:t.planForm.isOnline,callback:function(e){t.$set(t.planForm,"isOnline",e)},expression:"planForm.isOnline"}},t._l(t.onlineStatus,function(t){return n("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1)],1),t._v(" "),n("el-col",{attrs:{span:11}},[n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(e){return t.searchPlan()}}},[t._v("查 询")]),t._v(" "),n("el-button",{attrs:{icon:"el-icon-plus",type:"success"},on:{click:t.addPlan}},[t._v("新 增")])],1)],1)],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-bottom":"40px"},attrs:{"header-cell-style":{background:"#F3F4F7",color:"#555"},data:t.tableData.productPlanList}},[n("el-table-column",{attrs:{prop:"id",label:"序号",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"planName",label:"计划名称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"priceStart",label:"起始价格(元)",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"isOnline",label:"产品状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.isOnlineFunction(e.row.isOnline))+"\n            "),n("br"),t._v("\n            "+t._s(2===e.row.isOnline?t.timeScope(e.row.startTime,e.row.endTime):"")+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(n){return n.preventDefault(),t.editRow(e.$index)}}},[t._v("\n\t\t          编辑\n\t\t        ")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(n){return n.preventDefault(),t.offlineBtn(e.$index)}}},[t._v("\n                "+t._s(1!==e.row.isOnline?"上线":"下线")+"\n\t\t        ")]),t._v(" "),n("el-button",{attrs:{type:"text",disabled:1===e.row.isOnline,size:"medium"},nativeOn:{click:function(n){return n.preventDefault(),t.openBook(e.$index)}}},[t._v("\n\t\t          "+t._s(2===e.row.isOnline?"取消预售":"预售")+"\n\t\t        ")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(n){return n.preventDefault(),t.openPanel(e.$index)}}},[t._v("\n\t\t          试算面板\n\t\t        ")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(n){return n.preventDefault(),t.openPolicy(e.$index)}}},[t._v("\n\t\t          保单参数\n\t\t        ")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{width:"32%",title:"预售",visible:t.dialogFormVisible,center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"yushouform",attrs:{model:t.yushouform,rules:t.yushouformRules}},[n("el-form-item",{attrs:{label:"开始时间",prop:"startTime","label-width":"120px"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.yushouform.startTime,callback:function(e){t.$set(t.yushouform,"startTime",e)},expression:"yushouform.startTime"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"结束时间",prop:"endTime","label-width":"120px"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.yushouform.endTime,callback:function(e){t.$set(t.yushouform,"endTime",e)},expression:"yushouform.endTime"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"上线方式:",prop:"onlineType","label-width":"120px"}},[n("el-radio-group",{model:{value:t.yushouform.onlineType,callback:function(e){t.$set(t.yushouform,"onlineType",e)},expression:"yushouform.onlineType"}},[n("el-radio",{attrs:{label:1}},[t._v("自动上线")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("手动上线")])],1)],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.yushouHandle("yushouform")}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")])],1)],1)],1)},r=[],o=n("c4c8"),i=n("6bf2"),u=n.n(i),l={data:function(){return{planForm:{planName:"",isOnline:""},onlineStatus:[{name:"全部",value:""},{name:"下架",value:0},{name:"上架",value:1},{name:"预售",value:2}],pagination:{pageNum:1,pageSize:8},tableData:{},nowIndex:0,dialogFormVisible:!1,yushouform:{onlineType:"",startTime:"",endTime:""},yushouformRules:{startTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"blur"}],onlineType:[{required:!0,message:"请选择上线方式",trigger:"blur"}]}}},created:function(){this.getProductPlanByConditionsAxios()},methods:{getProductPlanByConditionsAxios:function(t){var e=this;Object(o["A"])(Object.assign({productId:this.$route.params.id},this.pagination,this.planForm,t)).then(function(t){"100100"===t.code&&(e.tableData=t.result)})},updateProductPlanStatus:function(t){var e=this;Object(o["I"])(t).then(function(t){"100100"===t.code?(e.$message.success(t.msg),e.getProductPlanByConditionsAxios(),e.dialogFormVisible=!1):e.$message.error(t.msg)})},offlineBtn:function(t){1!==this.tableData.productPlanList[t].isOnline?this.updateProductPlanStatus({isOnline:1,id:this.tableData.productPlanList[t].id}):this.updateProductPlanStatus({isOnline:0,id:this.tableData.productPlanList[t].id})},yushouHandle:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.updateProductPlanStatus(Object.assign({isOnline:2,id:e.tableData.productPlanList[e.nowIndex].id,startTime:u()(e.yushouform.startTime).format("YYYY-MM-DD"),endTime:u()(e.yushouform.endTime).format("YYYY-MM-DD"),onlineType:e.yushouform.onlineType}))})},openBook:function(t){if(this.nowIndex=t,2===this.tableData.productPlanList[this.nowIndex].isOnline)return this.updateProductPlanStatus({isOnline:0,id:this.tableData.productPlanList[this.nowIndex].id}),!1;this.yushouform=this.tableData.productPlanList[this.nowIndex],this.dialogFormVisible=!0},searchPlan:function(){this.pagination.pageNum=1,this.getProductPlanByConditionsAxios(this.pagination)},editRow:function(t){this.$router.push({path:"/product-administration/index-product/add-plan",query:{id:this.$route.params.id,planId:this.tableData.productPlanList[t].id}})},addPlan:function(){this.$router.push({path:"/product-administration/index-product/add-plan",query:{id:this.$route.params.id}})},openPolicy:function(t){this.$router.push({path:"/product-administration/index-product/policy",query:{id:this.tableData.productPlanList[t].id}})},openPanel:function(t){this.$router.push({path:"/product-administration/index-product/trial-panel/"+this.tableData.productPlanList[t].id})},isOnlineFunction:function(t){var e="";switch(t){case 0:e="未上线";break;case 1:e="已上线";break;case 2:e="预售中";break;default:e="未上线";break}return e},timeScope:function(t,e){return"("+u()(t).format("YYYY-MM-DD")+"~"+u()(e).format("YYYY-MM-DD")+")"}}},d=l,s=n("2877"),c=Object(s["a"])(d,a,r,!1,null,"b4fb9826",null);e["default"]=c.exports}}]);