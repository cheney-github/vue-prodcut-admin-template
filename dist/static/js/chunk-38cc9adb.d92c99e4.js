(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38cc9adb"],{"3eb9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"clauseHeader"},[a("el-col",{attrs:{span:3}},[a("img",{attrs:{src:e.insuranceBase.logoUrl,alt:""}})]),e._v(" "),a("el-col",{attrs:{span:3}},[a("h3",[e._v(e._s(e.insuranceBase.name))])]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addClause}},[e._v("新增条款")])],1),e._v(" "),a("el-main",[a("el-table",{staticStyle:{"margin-bottom":"40px"},attrs:{data:e.clauseList.data,"show-header":"","header-cell-style":{background:"#F3F4F7",color:"#555"}}},[a("el-table-column",{attrs:{prop:"createDate",label:"添加时间",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatTime")(t.row.createDate,t.row.createDate))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"条款名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataTypeStr",label:"条款类型",width:"180",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"H5详情",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.url?a("a",{on:{click:function(a){return e.openH5(t.row.url,t.row.title)}}},[e._v("预览")]):a("span",[e._v("暂无H5展示")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clause",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(a){return a.preventDefault(),e.editRow(t.$index)}}},[e._v("\n            编辑\n          ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(a){return a.preventDefault(),e.delRow(t.$index)}}},[e._v("\n            删除\n          ")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{background:"","current-page":e.pagination.pageNum,layout:"prev, pager, next","page-sizes":[10,20,30],total:e.clauseList.total,"page-size":e.pagination.pageSize},on:{"current-change":e.changePage,"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.editClauseDialog,center:""},on:{"update:visible":function(t){e.editClauseDialog=t},close:function(t){return e.closeDialog("clauseOperate")}}},[a("el-form",{ref:"clauseOperate",staticClass:"demo-ruleForm",attrs:{model:e.clauseOperate,rules:e.clauseOperateRules}},[a("el-form-item",{attrs:{label:"条款类型",prop:"dataType","label-width":"120px"}},[a("el-select",{attrs:{filterable:"","no-match-text":"暂无匹配数据",placeholder:"请选择条款类型"},model:{value:e.clauseOperate.dataType,callback:function(t){e.$set(e.clauseOperate,"dataType",t)},expression:"clauseOperate.dataType"}},e._l(e.clauseTypeData,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"条款名称",prop:"title","label-width":"120px"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入条款名称"},model:{value:e.clauseOperate.title,callback:function(t){e.$set(e.clauseOperate,"title",t)},expression:"clauseOperate.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"条款文件",prop:"url","label-width":"120px"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.logoShow,expression:"!logoShow"}]},[a("span",{on:{click:function(t){return e.openH5(e.clauseOperate.url)}}},[e._v(e._s(e.clauseOperate.url))]),e._v(" "),a("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleRemove()}}})]),e._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.logoShow,expression:"logoShow"}],attrs:{action:e.baseUpLoad,"with-credentials":!0,"on-success":e.uploadSuccess,"file-list":e.fileList,accept:".doc,.docx,.pdf"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("支持格式：.doc .docx .pdf，单个文件不能超过20MB")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.messageHandle("clauseOperate")}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.delClauseDialog,width:"40%",center:""},on:{"update:visible":function(t){e.delClauseDialog=t}}},[a("h3",{staticStyle:{"text-align":"center"}},[e._v("您确定要删除该内容吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.delHandle}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.delClauseDialog=!1}}},[e._v("取 消")])],1)])],1)},r=[],i=a("f13d"),s=(a("5c96"),a("7b53")),o={data:function(){return{insuranceBase:{},clauseTypeData:[{name:"主险条款",value:1},{name:"附加险条款",value:2}],editClauseDialog:!1,delClauseDialog:!1,dialogTitle:"添加条款",nowIndex:0,clauseOperate:{title:"",dataType:"",url:"",insuracneId:this.$route.query.id},clauseOperateRules:{title:[{validator:s["f"],trigger:"change"}],dataType:[{validator:s["g"],trigger:"change"}],url:[{validator:s["j"],trigger:"change"}]},clauseList:{},pagination:{pageNum:1,pageSize:10},fileList:[],baseUpLoad:""}},computed:{logoShow:function(){return!this.clauseOperate.url}},created:function(){this.baseUpLoad="http://test.gateway.homeins.cn/api/product-center/admin/upload",this.$route.query.id&&this.getProductTermsListAxios()},methods:{getProductTermsListAxios:function(e){var t=this;Object(i["c"])(Object.assign({id:this.$route.query.id},this.pagination,e)).then(function(e){"100100"===e.code&&(0===e.result.productTerms.length&&1!==t.pagination.pageNum&&(t.pagination.pageNum=1,t.getProductTermsListAxios()),t.clauseList=e.result.productTerms,t.insuranceBase=e.result.insuranceCompany)})},deleteTermsAxios:function(e){var t=this;Object(i["a"])(Object.assign({},e)).then(function(e){"100100"===e.code?(t.handleClose(),t.$message.success(e.msg),t.resetDtata()):t.$message.error(e.msg)})},updateTermsAxios:function(e){var t=this;Object(i["g"])(Object.assign({},e)).then(function(e){"100100"===e.code?(t.handleClose(),t.$message.success(e.msg),t.resetDtata()):t.$message.error(e.msg)})},saveTermsAxios:function(e){var t=this;Object(i["e"])(Object.assign({},e)).then(function(e){"100100"===e.code?(t.handleClose(),t.$message.success(e.msg),t.resetDtata()):t.$message.error(e.msg)})},resetDtata:function(){this.getProductTermsListAxios(),this.handleClose()},changePage:function(e){this.pagination.pageNum=e,this.getProductTermsListAxios()},closeDialog:function(e){this.$refs[e].resetFields()},handleClose:function(){this.editClauseDialog=!1,this.delClauseDialog=!1},messageHandle:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;-1!==t.dialogTitle.indexOf("添加")?t.saveTermsAxios(t.clauseOperate):t.updateTermsAxios(t.clauseOperate)})},delRow:function(e){this.nowIndex=e,this.delClauseDialog=!0},editRow:function(e){this.nowIndex=e,this.editClauseDialog=!0,this.dialogTitle="编辑条款",this.clauseOperate=JSON.parse(JSON.stringify(this.clauseList.data[this.nowIndex])),this.fileList=[{name:this.clauseOperate.title,url:this.clauseOperate.url}]},addClause:function(){this.editClauseDialog=!0,this.dialogTitle="添加条款",this.clauseOperate={title:"",dataType:"",url:"",insuracneId:this.$route.query.id},this.fileList=[]},delHandle:function(){this.deleteTermsAxios(this.clauseList.data[this.nowIndex])},uploadSuccess:function(e,t,a){console.log(e),"100100"===e.code&&(this.clauseOperate.url=e.result,this.fileList=a)},handleRemove:function(){this.fileList=[],this.clauseOperate.url=""},openH5:function(e,t){var a=(window.innerWidth-650)/2;window.open(e,t,"height="+window.innerHeight+", width=650,top=80,left="+a+", toolbar =no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")}}},l=o,u=(a("55ed"),a("2877")),c=Object(u["a"])(l,n,r,!1,null,null,null);t["default"]=c.exports},"55ed":function(e,t,a){"use strict";var n=a("c61e"),r=a.n(n);r.a},"7b53":function(e,t,a){"use strict";function n(e,t,a){if(!t)return a(new Error("当前项不能为空"));a()}function r(e,t,a){if(!t)return a(new Error("账号不能为空"));a()}function i(e,t,a){if(!t)return a(new Error("手机号不能为空"));var n=/^1[3|4|5|7|8][0-9]\d{8}$/;if(!n.test(t))return a(new Error("请输入正确的手机号"));a()}function s(e,t,a){if(!t)return a(new Error("请选择"));a()}function o(e,t,a){if(!t)return a(new Error("请输入英文名称"));var n=/^[A-Z]/;if(!n.test(t))return a(new Error("名称必须都是大写"));a()}function l(e,t,a){if(!t)return a(new Error("请输入排序"));var n=/^([1-9][0-9]*)/;if(!n.test(t))return a(new Error("只能输入数字"));a()}function u(e,t,a){if(!t)return a(new Error("请输入链接"));a()}function c(e,t,a){if(!t)return a(new Error("请上传文件  "));a()}function d(e,t,a){if(!t)return a(new Error("请输入日期"));var n=/^([1-9]|[1-2][0-9]|3[0-1])$/;if(!n.test(t))return a(new Error("只能输入1~31范围数字"));a()}function p(e,t,a){if(!t)return a(new Error("请输入价格"));var n=/(^[1-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/;if(!n.test(t))return a(new Error("价格格式不正确"));a()}a.d(t,"f",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"i",function(){return i}),a.d(t,"g",function(){return s}),a.d(t,"b",function(){return o}),a.d(t,"h",function(){return l}),a.d(t,"c",function(){return u}),a.d(t,"j",function(){return c}),a.d(t,"e",function(){return d}),a.d(t,"d",function(){return p})},c61e:function(e,t,a){},f13d:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"f",function(){return i}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"g",function(){return l}),a.d(t,"e",function(){return u}),a.d(t,"a",function(){return c});var n=a("b775");function r(e){return Object(n["a"])({url:"/admin/getInsuranceList",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/admin/updateInsurance",method:"put",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(e){return Object(n["a"])({url:"/admin/saveInsurance",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/admin/getProductTermsList",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/admin/updateTerms",method:"put",data:e})}function u(e){return Object(n["a"])({url:"/admin/saveTerms",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/admin/deleteTerms",method:"delete",params:e})}}}]);