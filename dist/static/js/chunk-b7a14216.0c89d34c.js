(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7a14216"],{"05fa":function(t,n,e){"use strict";var a=e("ac9d"),r=e.n(a);r.a},"11e9":function(t,n,e){var a=e("52a7"),r=e("4630"),i=e("6821"),o=e("6a99"),s=e("69a8"),u=e("c69a"),c=Object.getOwnPropertyDescriptor;n.f=e("9e1e")?c:function(t,n){if(t=i(t),n=o(n,!0),u)try{return c(t,n)}catch(e){}if(s(t,n))return r(!a.f.call(t,n),t[n])}},"2f21":function(t,n,e){"use strict";var a=e("79e5");t.exports=function(t,n){return!!t&&a(function(){n?t.call(null,function(){},1):t.call(null)})}},"36bd":function(t,n,e){"use strict";var a=e("4bf8"),r=e("77f1"),i=e("9def");t.exports=function(t){var n=a(this),e=i(n.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,e),u=o>2?arguments[2]:void 0,c=void 0===u?e:r(u,e);while(c>s)n[s++]=t;return n}},"4d58":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-row",[e("el-row",{staticClass:"el-header"},[e("h2",[t._v(t._s(t.title))])]),t._v(" "),e("el-main",[e("Commontable",{ref:"mycommontable",attrs:{isLS:t.isLS,planId:t.planId,currentTab:t.currentTab,datalist:t.datalist,getData:t.getData}})],1)],1)},r=[],i=(e("456d"),e("55dd"),e("ac6a"),e("6c7b"),e("c5f6"),e("a635")),o=e("82b3"),s={components:{Commontable:i["a"]},data:function(){return{datalist:[],currentTab:"1"}},created:function(){this.title=this.$route.query.title,this.isLS=Number(this.$route.query.isLS),this.planId=this.$route.params.id,this.getOutPointByPlanIdAndTypeAxios()},methods:{getOutPointByPlanIdAndTypeAxios:function(){var t=this;Object(o["b"])({planId:this.$route.params.id,type:this.currentTab}).then(function(n){if("100100"===n.code){t.datalist=t.filterdata(n.result.productOutPoints),t.resultData=n.result;var e=[];JSON.parse(t.resultData.insureYears).map(function(n){JSON.parse(t.resultData.insurantYears).map(function(t){e.push({insureYears:n,insurantYears:t,pointarr:new Array(20).fill({id:"",point:"--",createDate:""})})})}),e.forEach(function(n,a){t.datalist.forEach(function(r,i){n.insureYears.value===r.payType&&n.insurantYears.value===r.insurantYearsLimit&&(e[a].pointarr=t.datalist[i].pointarr)})}),t.$refs.mycommontable.fuzhi(e)}else t.$message.error(n.msg)})},getData:function(){this.getOutPointByPlanIdAndTypeAxios()},tabChange:function(){this.getOutPointByPlanIdAndTypeAxios()},filterdata:function(t){var n=this,e=this.dataBy(t,function(t){return[t.insurantYearsLimit,t.payType]}),a=[],r={};return e.map(function(t){r={pointarr:new Array(20).fill({id:"",point:"--",createDate:""}),insurantYearsLimit:"",payType:"",additionalName:"2"===n.currentTab?"附加险名称":"",description:"",id:"",indexYear:"",planId:"",point:"",type:Number(n.currentTab)},t&&t.map(function(t){r.pointarr[t.indexYear-1]={id:t.id,point:t.point,createDate:t.createDate},r.planId=n.$route.params.id,r.insurantYearsLimit=t.insurantYearsLimit,r.payType=t.payType}),a.push(JSON.parse(JSON.stringify(r)))}),a.sort(function(t,n){return t.payType-n.payType}),a.sort(function(t,n){return t.insurantYearsLimit-n.insurantYearsLimit}),a},dataBy:function(t,n){var e={};return t.map(function(t){var a=JSON.stringify(n(t));e[a]=e[a]||[],e[a].push(t)}),Object.keys(e).map(function(t){return e[t]})}}},u=s,c=(e("51ae"),e("2877")),l=Object(c["a"])(u,a,r,!1,null,"4b41972d",null);n["default"]=l.exports},"51ae":function(t,n,e){"use strict";var a=e("9a91"),r=e.n(a);r.a},"55dd":function(t,n,e){"use strict";var a=e("5ca1"),r=e("d8e8"),i=e("4bf8"),o=e("79e5"),s=[].sort,u=[1,2,3];a(a.P+a.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!e("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),r(t))}})},"5dbc":function(t,n,e){var a=e("d3f4"),r=e("8b97").set;t.exports=function(t,n,e){var i,o=n.constructor;return o!==e&&"function"==typeof o&&(i=o.prototype)!==e.prototype&&a(i)&&r&&r(t,i),t}},"6c7b":function(t,n,e){var a=e("5ca1");a(a.P,"Array",{fill:e("36bd")}),e("9c6c")("fill")},"82b3":function(t,n,e){"use strict";e.d(n,"c",function(){return r}),e.d(n,"b",function(){return i}),e.d(n,"d",function(){return o}),e.d(n,"a",function(){return s});var a=e("b775");function r(t){return Object(a["a"])({url:"/admin/getOutPointListByCondition",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/admin/getOutPointByPlanIdAndType",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/admin/setOutPoint",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/admin/deleteOutPointById",method:"get",params:t})}},"8b97":function(t,n,e){var a=e("d3f4"),r=e("cb7c"),i=function(t,n){if(r(t),!a(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,a){try{a=e("9b43")(Function.call,e("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),n=!(t instanceof Array)}catch(r){n=!0}return function(t,e){return i(t,e),n?t.__proto__=e:a(t,e),t}}({},!1):void 0),check:i}},9093:function(t,n,e){var a=e("ce10"),r=e("e11e").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return a(t,r)}},"9a91":function(t,n,e){},a635:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-row",[t.isEditStatus?e("el-row",{staticStyle:{"margin-bottom":"20px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("保存")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.closeData}},[t._v("取消")])],1):e("el-row",{staticStyle:{"margin-bottom":"20px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.editDataBtn}},[t._v("编辑数据")])],1),t._v(" "),e("el-row",{staticClass:"tableTitle"},[t._v("\n    "+t._s(t.istableLable)+"\n  ")]),t._v(" "),e("el-table",{staticStyle:{"margin-bottom":"40px"},attrs:{data:t.isEditStatus?t.editData:t.tableData,"show-header":"","header-cell-style":{background:"#F3F4F7",color:"#555"},"max-height":"500"}},[e("el-table-column",{attrs:{width:"200px",fixed:"",prop:"insureYears",label:"影响因素",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[t._v("\n        "+t._s(n.row.insureYears.show+"&"+n.row.insurantYears.show)+"\n      ")]}}])}),t._v(" "),t._l(t.yearAll,function(n,a){return e("el-table-column",{attrs:{prop:"pointarr",label:n.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[t.isEditStatus?e("div",[e("el-input",{attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')"},on:{blur:function(e){return t.blurHandle(e.target.value,n.$index,a)}},model:{value:n.row.pointarr[a].point,callback:function(e){t.$set(n.row.pointarr[a],"point",e)},expression:"scope.row.pointarr[index].point"}})],1):e("div",[t._v("\n          "+t._s(n.row.pointarr[a].point)+"\n        ")])]}}],null,!0)})})],2)],1)},r=[],i=(e("c5f6"),e("82b3")),o={props:{datalist:{type:Array,default:[]},currentTab:{type:String,default:"1"},planId:{type:String},getData:{type:Function},isLS:{type:Number}},data:function(){return{isEditStatus:!1,editData:[],tableTitleData:[],tableData:[],yearAll:[{name:"首年"},{name:"第二年"},{name:"第三年"},{name:"第四年"},{name:"第五年"},{name:"第六年"},{name:"第七年"},{name:"第八年"},{name:"第九年"},{name:"第十年"},{name:"第十一年"},{name:"第十二年"},{name:"第十三年"},{name:"第十四年"},{name:"第十五年"},{name:"第十六年"},{name:"第十七年"},{name:"第十八年"},{name:"第十九年"},{name:"第二十年"}]}},created:function(){1===Number(this.isLS)&&(this.yearAll=[{name:"首年"}])},computed:{istableLable:function(){return"2"===this.currentTab?"附加险推广费":"主险推广费"}},methods:{setOutPointAxios:function(t){var n=this;Object(i["d"])(t).then(function(t){"100100"===t.code&&(n.getData(),n.closeData())})},deleteOutPointByIdAxios:function(t){var n=this;Object(i["a"])(t).then(function(t){"100100"===t.code&&n.getData()})},blurHandle:function(t,n,e){if(t)return!0;this.tableData[n].pointarr[e].id&&this.deleteOutPointByIdAxios({id:this.tableData[n].pointarr[e].id})},fuzhi:function(t){this.editData=JSON.parse(JSON.stringify(t)),this.editData.map(function(t){t.pointarr.map(function(n,e){"--"===n.point&&(t.pointarr[e].point="")})}),this.tableData=t},editDataBtn:function(){if(0===this.tableData.length)return this.$message.error("【缴费期限】投保项未配置"),!1;this.isEditStatus=!0,this.editData=JSON.parse(JSON.stringify(this.tableData)),this.editData.map(function(t){t.pointarr.map(function(n,e){"--"===n.point&&(t.pointarr[e].point="")})})},saveData:function(){var t=this,n=[];this.editData.map(function(e){e.pointarr.map(function(a,r){""===a.point?e.pointarr[r].point="--":(e.pointarr[r].point=Number(e.pointarr[r].point),e.description=(2===e.type?"附加险":"主险")+"&"+e.insureYears.show+"&"+e.insurantYears.show+"&第"+(r+1)+"年返点"+e.pointarr[r].point,e.indexYear=r+1,e.insurantYearsLimit=e.insurantYears.value,e.payType=e.insureYears.value,e.id=e.pointarr[r].id,e.planId=t.planId,e.createDate=e.pointarr[r].createDate?e.pointarr[r].createDate:Date.parse(new Date),e.point=e.pointarr[r].point,e.type=Number(t.currentTab),n.push(JSON.parse(JSON.stringify(e))))})}),this.setOutPointAxios(n)},closeData:function(){this.isEditStatus=!1}}},s=o,u=(e("05fa"),e("2877")),c=Object(u["a"])(s,a,r,!1,null,"8334a0b4",null);n["a"]=c.exports},aa77:function(t,n,e){var a=e("5ca1"),r=e("be13"),i=e("79e5"),o=e("fdef"),s="["+o+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),p=function(t,n,e){var r={},s=i(function(){return!!o[t]()||u[t]()!=u}),c=r[t]=s?n(f):o[t];e&&(r[e]=c),a(a.P+a.F*s,"String",r)},f=p.trim=function(t,n){return t=String(r(t)),1&n&&(t=t.replace(c,"")),2&n&&(t=t.replace(l,"")),t};t.exports=p},ac9d:function(t,n,e){},c5f6:function(t,n,e){"use strict";var a=e("7726"),r=e("69a8"),i=e("2d95"),o=e("5dbc"),s=e("6a99"),u=e("79e5"),c=e("9093").f,l=e("11e9").f,p=e("86cc").f,f=e("aa77").trim,d="Number",m=a[d],b=m,h=m.prototype,y=i(e("2aeb")(h))==d,v="trim"in String.prototype,g=function(t){var n=s(t,!1);if("string"==typeof n&&n.length>2){n=v?n.trim():f(n,3);var e,a,r,i=n.charCodeAt(0);if(43===i||45===i){if(e=n.charCodeAt(2),88===e||120===e)return NaN}else if(48===i){switch(n.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+n}for(var o,u=n.slice(2),c=0,l=u.length;c<l;c++)if(o=u.charCodeAt(c),o<48||o>r)return NaN;return parseInt(u,a)}}return+n};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof m&&(y?u(function(){h.valueOf.call(e)}):i(e)!=d)?o(new b(g(n)),e,m):g(n)};for(var O,_=e("9e1e")?c(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;_.length>D;D++)r(b,O=_[D])&&!r(m,O)&&p(m,O,l(b,O));m.prototype=h,h.constructor=m,e("2aba")(a,d,m)}},fdef:function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);