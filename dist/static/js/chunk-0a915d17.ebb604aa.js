(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a915d17"],{"7b53":function(e,t,n){"use strict";function a(e,t,n){if(!t)return n(new Error("当前项不能为空"));n()}function r(e,t,n){if(!t)return n(new Error("账号不能为空"));n()}function i(e,t,n){if(!t)return n(new Error("手机号不能为空"));var a=/^1[3|4|5|7|8][0-9]\d{8}$/;if(!a.test(t))return n(new Error("请输入正确的手机号"));n()}function o(e,t,n){if(!t)return n(new Error("请选择"));n()}function s(e,t,n){if(!t)return n(new Error("请输入英文名称"));var a=/^[A-Z]/;if(!a.test(t))return n(new Error("名称必须都是大写"));n()}function c(e,t,n){if(!t)return n(new Error("请输入排序"));var a=/^([1-9][0-9]*)/;if(!a.test(t))return n(new Error("只能输入数字"));n()}function l(e,t,n){if(!t)return n(new Error("请输入链接"));n()}function u(e,t,n){if(!t)return n(new Error("请上传文件  "));n()}function d(e,t,n){if(!t)return n(new Error("请输入日期"));var a=/^([1-9]|[1-2][0-9]|3[0-1])$/;if(!a.test(t))return n(new Error("只能输入1~31范围数字"));n()}function p(e,t,n){if(!t)return n(new Error("请输入价格"));var a=/(^[1-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/;if(!a.test(t))return n(new Error("价格格式不正确"));n()}n.d(t,"f",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"i",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"h",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"j",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return p})},"8b96":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-header",[n("el-form",{ref:"searchInsurance",staticClass:"demo-ruleForm",attrs:{model:e.searchInsurance}},[n("el-form-item",{attrs:{label:"所属保险公司",prop:"insurance"}},[n("el-col",{attrs:{span:5}},[n("el-select",{attrs:{filterable:"","no-match-text":"暂无匹配数据",placeholder:"请选择保险公司"},model:{value:e.searchInsurance.keyValue,callback:function(t){e.$set(e.searchInsurance,"keyValue",t)},expression:"searchInsurance.keyValue"}},e._l(e.insuranceData.companyList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),n("el-col",{attrs:{span:11}},[n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.searchData}},[e._v("查 询")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-plus",type:"success"},on:{click:e.addInsurance}},[e._v("新 增")])],1)],1)],1)],1),e._v(" "),n("el-main",[n("el-table",{staticStyle:{"margin-bottom":"40px"},attrs:{data:e.insuranceTable.data,"show-header":"","header-cell-style":{background:"#F3F4F7",color:"#555"}}},[n("el-table-column",{attrs:{prop:"createDate",label:"创建日期",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatTime")(t.row.createDate,t.row.createDate))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"保险公司",width:"220",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"logoUrl",label:"Logo",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.logoUrl?n("img",{staticStyle:{width:"150px",height:"50px"},attrs:{src:t.row.logoUrl,alt:""}}):n("span",[e._v("暂无Logo")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"balanceCycle",label:"结算日期",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"clause",label:"保险条款",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{attrs:{to:{path:"clause",query:{id:t.row.id}}}},[e._v("查看")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"clause",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(n){return n.preventDefault(),e.editRow(t.$index)}}},[e._v("\n            编辑\n          ")])]}}])})],1),e._v(" "),n("el-row",{staticStyle:{"text-align":"center"}},[n("el-pagination",{attrs:{background:"","current-page":e.pagination.pageNum,layout:"prev, pager, next",total:e.insuranceTable.total,"page-size":e.pagination.pageSize},on:{"current-change":e.changePage,"update:currentPage":function(t){return e.$set(e.pagination,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageNum",t)}}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.editInsuranceDialog,center:""},on:{close:function(t){return e.closeDialog("insuranceOperate")},"update:visible":function(t){e.editInsuranceDialog=t}}},[n("el-form",{ref:"insuranceOperate",staticClass:"demo-ruleForm",attrs:{model:e.insuranceOperate,rules:e.insuranceOperateRules}},[n("el-form-item",{attrs:{label:"保险公司名称",prop:"name","label-width":"120px"}},[n("el-input",{attrs:{placeholder:"请输入保险公司名称"},model:{value:e.insuranceOperate.name,callback:function(t){e.$set(e.insuranceOperate,"name",t)},expression:"insuranceOperate.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"保险公司Logo",prop:"logoUrl","label-width":"120px"}},[n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.logoShow,expression:"logoShow"}],staticClass:"showLogo"},[n("img",{attrs:{src:e.insuranceOperate.logoUrl,alt:""}}),e._v(" "),n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.handldAvatarRemove()}}})]),e._v(" "),n("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.logoShow,expression:"!logoShow"}],attrs:{"list-type":"picture-card",action:e.baseUpLoad,"with-credentials":!0,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,accept:".jpg,.png","file-list":e.fileLoad}},[n("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),n("el-form-item",{attrs:{label:"结算日期",prop:"balanceCycle","label-width":"120px"}},[n("el-input",{attrs:{placeholder:"请输入每月结算日期"},model:{value:e.insuranceOperate.balanceCycle,callback:function(t){e.$set(e.insuranceOperate,"balanceCycle",t)},expression:"insuranceOperate.balanceCycle"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.messageHandle("insuranceOperate")}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)],1)},r=[],i=n("f13d"),o=n("7b53"),s={data:function(){return{editInsuranceDialog:!1,delInsuranceDialog:!1,dialogTitle:"添加保险公司",nowIndex:0,insuranceOperate:{name:"",logoUrl:"",balanceCycle:""},searchInsurance:{keyValue:""},insuranceOperateRules:{name:[{validator:o["f"],trigger:"blur"}],logoUrl:[{validator:o["j"],trigger:"blur"}],balanceCycle:[{validator:o["e"],trigger:"blur"}]},insuranceData:{},insuranceTable:{},pagination:{pageNum:1,pageSize:8},fileLoad:[],baseUpLoad:""}},created:function(){this.baseUpLoad="http://test.gateway.homeins.cn/api/product-center/admin/upload",this.insuranceAxios()},computed:{logoShow:function(){return""!==this.insuranceOperate.logoUrl}},methods:{searchData:function(){this.pagination={pageNum:1,pageSize:8},this.insuranceAxios(this.searchInsurance)},insuranceAxios:function(e){var t=this;Object(i["b"])(Object.assign({},e,this.pagination)).then(function(e){"100100"===e.code&&(t.insuranceData=e.result,t.insuranceData.companyList=[{id:"",name:"全部"}].concat(t.insuranceData.companyList),t.insuranceTable=t.insuranceData.insuranceCompanyPage)})},updateInsuranceAxios:function(e){var t=this;Object(i["f"])(Object.assign({},e)).then(function(e){"100100"===e.code?(t.handleClose(),t.$message.success(e.msg),t.resetSearchData()):t.$message.error(e.msg)})},saveInsuranceAxios:function(e){var t=this;Object(i["d"])(Object.assign({},e)).then(function(e){"100100"===e.code?(t.handleClose(),t.$message.success(e.msg),t.resetSearchData()):t.$message.error(e.msg)})},resetSearchData:function(){this.pagination={pageNum:1,pageSize:8},this.searchInsurance.keyValue="",this.insuranceAxios(Object.assign(this.searchInsurance,this.pagination))},changePage:function(e){this.pagination.pageNum=e,this.insuranceAxios()},closeDialog:function(e){this.$refs[e].resetFields()},handleClose:function(){this.editInsuranceDialog=!1,this.handldAvatarRemove()},messageHandle:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;-1!=t.dialogTitle.indexOf("添加")?t.saveInsuranceAxios(t.insuranceOperate):t.updateInsuranceAxios(t.insuranceOperate)})},addInsurance:function(){this.insuranceOperate={name:"",logoUrl:"",balanceCycle:""},this.editInsuranceDialog=!0,this.dialogTitle="添加保险公司信息"},editRow:function(e){console.log(e),this.nowIndex=e,this.editInsuranceDialog=!0,this.dialogTitle="编辑保险公司信息",this.insuranceOperate=JSON.parse(JSON.stringify(this.insuranceTable.data[this.nowIndex]))},handleAvatarSuccess:function(e,t,n){"100100"===e.code&&(this.fileLoad=n,this.insuranceOperate.logoUrl=e.result)},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},handldAvatarRemove:function(){this.insuranceOperate.logoUrl="",this.fileLoad=[]}}},c=s,l=(n("fcd7"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,"0cb71d7c",null);t["default"]=u.exports},c8eb:function(e,t,n){},f13d:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"g",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return u});var a=n("b775");function r(e){return Object(a["a"])({url:"/admin/getInsuranceList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/admin/updateInsurance",method:"put",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(e){return Object(a["a"])({url:"/admin/saveInsurance",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/admin/getProductTermsList",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/admin/updateTerms",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/admin/saveTerms",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/admin/deleteTerms",method:"delete",params:e})}},fcd7:function(e,t,n){"use strict";var a=n("c8eb"),r=n.n(a);r.a}}]);