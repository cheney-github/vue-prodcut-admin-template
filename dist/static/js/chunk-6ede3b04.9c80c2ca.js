(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ede3b04"],{"05fa":function(t,e,n){"use strict";var a=n("ac9d"),r=n.n(a);r.a},"10a1":function(t,e,n){},"11e9":function(t,e,n){var a=n("52a7"),r=n("4630"),i=n("6821"),o=n("6a99"),s=n("69a8"),u=n("c69a"),c=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?c:function(t,e){if(t=i(t),e=o(e,!0),u)try{return c(t,e)}catch(n){}if(s(t,e))return r(!a.f.call(t,e),t[e])}},"2f21":function(t,e,n){"use strict";var a=n("79e5");t.exports=function(t,e){return!!t&&a(function(){e?t.call(null,function(){},1):t.call(null)})}},"36bd":function(t,e,n){"use strict";var a=n("4bf8"),r=n("77f1"),i=n("9def");t.exports=function(t){var e=a(this),n=i(e.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,c=void 0===u?n:r(u,n);while(c>s)e[s++]=t;return e}},"4b85":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-row",{staticClass:"el-header"},[n("h2",[t._v(t._s(t.title))])]),t._v(" "),n("el-main",[n("el-tabs",{on:{"tab-click":t.tabChange},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(t.classify,function(e){return n("el-tab-pane",{attrs:{label:e.name,name:e.value}},[n("Commontable",{ref:"mycommontable",refInFor:!0,attrs:{isLS:t.isLS,planId:t.planId,currentTab:t.currentTab,datalist:t.datalist,getData:t.getData}})],1)}),1)],1)],1)},r=[],i=(n("456d"),n("55dd"),n("ac6a"),n("6c7b"),n("c5f6"),n("a635")),o=n("82b3"),s={components:{Commontable:i["a"]},data:function(){return{currentTab:"1",title:"",planId:"",classify:[{name:"主险",value:"1"},{name:"附加险",value:"2"}],datalist:[],isLS:""}},created:function(){this.title=this.$route.query.title,this.planId=this.$route.params.id,this.getOutPointByPlanIdAndTypeAxios(),this.isLS=Number(this.$route.query.isLS)},methods:{getOutPointByPlanIdAndTypeAxios:function(){var t=this;Object(o["b"])({planId:this.$route.params.id,type:this.currentTab}).then(function(e){if("100100"===e.code){t.datalist=t.filterdata(e.result.productOutPoints),t.resultData=e.result;var n=[];JSON.parse(t.resultData.insureYears).map(function(e){JSON.parse(t.resultData.insurantYears).map(function(t){n.push({insureYears:e,insurantYears:t,pointarr:new Array(20).fill({id:"",point:"--",createDate:""})})})}),n.forEach(function(e,a){t.datalist.forEach(function(r,i){e.insureYears.value===r.payType&&e.insurantYears.value===r.insurantYearsLimit&&(n[a].pointarr=t.datalist[i].pointarr)})}),"2"===t.currentTab?t.$refs.mycommontable[1].fuzhi(n):t.$refs.mycommontable[0].fuzhi(n)}else t.$message.error(e.msg)})},getData:function(){this.getOutPointByPlanIdAndTypeAxios()},tabChange:function(){this.getOutPointByPlanIdAndTypeAxios()},filterdata:function(t){var e=this,n=this.dataBy(t,function(t){return[t.insurantYearsLimit,t.payType]}),a=[],r={};return n.map(function(t){r={pointarr:new Array(20).fill({id:"",point:"--",createDate:""}),insurantYearsLimit:"",payType:"",additionalName:"2"===e.currentTab?"附加险名称":"",description:"",id:"",indexYear:"",planId:"",point:"",type:Number(e.currentTab)},t&&t.map(function(t){r.pointarr[t.indexYear-1]={id:t.id,point:t.point,createDate:t.createDate},r.planId=e.$route.params.id,r.insurantYearsLimit=t.insurantYearsLimit,r.payType=t.payType}),a.push(JSON.parse(JSON.stringify(r)))}),a.sort(function(t,e){return t.payType-e.payType}),a.sort(function(t,e){return t.insurantYearsLimit-e.insurantYearsLimit}),a},dataBy:function(t,e){var n={};return t.map(function(t){var a=JSON.stringify(e(t));n[a]=n[a]||[],n[a].push(t)}),Object.keys(n).map(function(t){return n[t]})}}},u=s,c=(n("adaf"),n("2877")),l=Object(c["a"])(u,a,r,!1,null,"610484d0",null);e["default"]=l.exports},"55dd":function(t,e,n){"use strict";var a=n("5ca1"),r=n("d8e8"),i=n("4bf8"),o=n("79e5"),s=[].sort,u=[1,2,3];a(a.P+a.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),r(t))}})},"5dbc":function(t,e,n){var a=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&a(i)&&r&&r(t,i),t}},"6c7b":function(t,e,n){var a=n("5ca1");a(a.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},"82b3":function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s});var a=n("b775");function r(t){return Object(a["a"])({url:"/admin/getOutPointListByCondition",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/admin/getOutPointByPlanIdAndType",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/admin/setOutPoint",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/admin/deleteOutPointById",method:"get",params:t})}},"8b97":function(t,e,n){var a=n("d3f4"),r=n("cb7c"),i=function(t,e){if(r(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:i}},9093:function(t,e,n){var a=n("ce10"),r=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,r)}},a635:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[t.isEditStatus?n("el-row",{staticStyle:{"margin-bottom":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.closeData}},[t._v("取消")])],1):n("el-row",{staticStyle:{"margin-bottom":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.editDataBtn}},[t._v("编辑数据")])],1),t._v(" "),n("el-row",{staticClass:"tableTitle"},[t._v("\n    "+t._s(t.istableLable)+"\n  ")]),t._v(" "),n("el-table",{staticStyle:{"margin-bottom":"40px"},attrs:{data:t.isEditStatus?t.editData:t.tableData,"show-header":"","header-cell-style":{background:"#F3F4F7",color:"#555"},"max-height":"500"}},[n("el-table-column",{attrs:{width:"200px",fixed:"",prop:"insureYears",label:"影响因素",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.insureYears.show+"&"+e.row.insurantYears.show)+"\n      ")]}}])}),t._v(" "),t._l(t.yearAll,function(e,a){return n("el-table-column",{attrs:{prop:"pointarr",label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditStatus?n("div",[n("el-input",{attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')"},on:{blur:function(n){return t.blurHandle(n.target.value,e.$index,a)}},model:{value:e.row.pointarr[a].point,callback:function(n){t.$set(e.row.pointarr[a],"point",n)},expression:"scope.row.pointarr[index].point"}})],1):n("div",[t._v("\n          "+t._s(e.row.pointarr[a].point)+"\n        ")])]}}],null,!0)})})],2)],1)},r=[],i=(n("c5f6"),n("82b3")),o={props:{datalist:{type:Array,default:[]},currentTab:{type:String,default:"1"},planId:{type:String},getData:{type:Function},isLS:{type:Number}},data:function(){return{isEditStatus:!1,editData:[],tableTitleData:[],tableData:[],yearAll:[{name:"首年"},{name:"第二年"},{name:"第三年"},{name:"第四年"},{name:"第五年"},{name:"第六年"},{name:"第七年"},{name:"第八年"},{name:"第九年"},{name:"第十年"},{name:"第十一年"},{name:"第十二年"},{name:"第十三年"},{name:"第十四年"},{name:"第十五年"},{name:"第十六年"},{name:"第十七年"},{name:"第十八年"},{name:"第十九年"},{name:"第二十年"}]}},created:function(){1===Number(this.isLS)&&(this.yearAll=[{name:"首年"}])},computed:{istableLable:function(){return"2"===this.currentTab?"附加险推广费":"主险推广费"}},methods:{setOutPointAxios:function(t){var e=this;Object(i["d"])(t).then(function(t){"100100"===t.code&&(e.getData(),e.closeData())})},deleteOutPointByIdAxios:function(t){var e=this;Object(i["a"])(t).then(function(t){"100100"===t.code&&e.getData()})},blurHandle:function(t,e,n){if(t)return!0;this.tableData[e].pointarr[n].id&&this.deleteOutPointByIdAxios({id:this.tableData[e].pointarr[n].id})},fuzhi:function(t){this.editData=JSON.parse(JSON.stringify(t)),this.editData.map(function(t){t.pointarr.map(function(e,n){"--"===e.point&&(t.pointarr[n].point="")})}),this.tableData=t},editDataBtn:function(){if(0===this.tableData.length)return this.$message.error("【缴费期限】投保项未配置"),!1;this.isEditStatus=!0,this.editData=JSON.parse(JSON.stringify(this.tableData)),this.editData.map(function(t){t.pointarr.map(function(e,n){"--"===e.point&&(t.pointarr[n].point="")})})},saveData:function(){var t=this,e=[];this.editData.map(function(n){n.pointarr.map(function(a,r){""===a.point?n.pointarr[r].point="--":(n.pointarr[r].point=Number(n.pointarr[r].point),n.description=(2===n.type?"附加险":"主险")+"&"+n.insureYears.show+"&"+n.insurantYears.show+"&第"+(r+1)+"年返点"+n.pointarr[r].point,n.indexYear=r+1,n.insurantYearsLimit=n.insurantYears.value,n.payType=n.insureYears.value,n.id=n.pointarr[r].id,n.planId=t.planId,n.createDate=n.pointarr[r].createDate?n.pointarr[r].createDate:Date.parse(new Date),n.point=n.pointarr[r].point,n.type=Number(t.currentTab),e.push(JSON.parse(JSON.stringify(n))))})}),this.setOutPointAxios(e)},closeData:function(){this.isEditStatus=!1}}},s=o,u=(n("05fa"),n("2877")),c=Object(u["a"])(s,a,r,!1,null,"8334a0b4",null);e["a"]=c.exports},aa77:function(t,e,n){var a=n("5ca1"),r=n("be13"),i=n("79e5"),o=n("fdef"),s="["+o+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),p=function(t,e,n){var r={},s=i(function(){return!!o[t]()||u[t]()!=u}),c=r[t]=s?e(f):o[t];n&&(r[n]=c),a(a.P+a.F*s,"String",r)},f=p.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=p},ac9d:function(t,e,n){},adaf:function(t,e,n){"use strict";var a=n("10a1"),r=n.n(a);r.a},c5f6:function(t,e,n){"use strict";var a=n("7726"),r=n("69a8"),i=n("2d95"),o=n("5dbc"),s=n("6a99"),u=n("79e5"),c=n("9093").f,l=n("11e9").f,p=n("86cc").f,f=n("aa77").trim,d="Number",m=a[d],b=m,h=m.prototype,y=i(n("2aeb")(h))==d,v="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():f(e,3);var n,a,r,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var o,u=e.slice(2),c=0,l=u.length;c<l;c++)if(o=u.charCodeAt(c),o<48||o>r)return NaN;return parseInt(u,a)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(y?u(function(){h.valueOf.call(n)}):i(n)!=d)?o(new b(g(e)),n,m):g(e)};for(var O,_=n("9e1e")?c(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;_.length>D;D++)r(b,O=_[D])&&!r(m,O)&&p(m,O,l(b,O));m.prototype=h,h.constructor=m,n("2aba")(a,d,m)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);